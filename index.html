<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Watch - Snellville Operations</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Lucide Core Library - Reliable for browser-side usage -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Babel for Browser-side JSX Transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: black; color: white; margin: 0; overflow-x: hidden; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        /**
         * Robust Icon component that works with the core Lucide library.
         * It manually renders the SVG paths from the Lucide icon data.
         */
        const Icon = ({ name, size = 24, className = "" }) => {
            const iconData = window.lucide ? window.lucide.icons[name] : null;
            
            if (!iconData) {
                return <div style={{ width: size, height: size }} className={className}></div>;
            }

            return (
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width={size}
                    height={size}
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    className={className}
                >
                    {iconData.map(([tag, attrs], i) => {
                        const Tag = tag;
                        // Map Lucide attributes to React-friendly props (e.g. stroke-width -> strokeWidth)
                        const reactAttrs = Object.keys(attrs).reduce((acc, key) => {
                            const camelKey = key.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
                            acc[camelKey] = attrs[key];
                            return acc;
                        }, {});
                        return <Tag key={i} {...reactAttrs} />;
                    })}
                </svg>
            );
        };

        const Card = ({ title, children, className = "" }) => (
            <div className={`bg-slate-900/80 border border-slate-700 rounded-xl p-6 backdrop-blur-sm shadow-2xl ${className}`}>
                {title && <h3 className="text-slate-400 font-semibold uppercase tracking-wider text-xs mb-4 flex items-center gap-2">{title}</h3>}
                {children}
            </div>
        );

        const Metric = ({ iconName, label, value, unit, color = "text-white" }) => (
            <div className="flex items-center gap-4">
                <div className="p-3 bg-slate-800 rounded-lg text-blue-400">
                    <Icon name={iconName} size={20} />
                </div>
                <div>
                    <p className="text-slate-400 text-xs uppercase font-medium">{label}</p>
                    <p className={`text-2xl font-bold ${color}`}>{value}<span className="text-sm font-normal ml-1 opacity-70">{unit}</span></p>
                </div>
            </div>
        );

        const App = () => {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [weather, setWeather] = useState({
                temp: 68,
                humidity: 75,
                wind: 12,
                windDir: 'NE',
                chanceOfRain: 90,
                precipIntensity: 8.2,
                uvIndex: 2,
                airQuality: "Good",
                condition: "Rainy"
            });

            const [alerts] = useState([
                {
                    id: 1,
                    title: "FLASH FLOOD WARNING",
                    expiry: "7:00 PM EST",
                    instruction: "Seek higher ground immediately. Avoid low-lying areas.",
                    severity: "Extreme"
                }
            ]);

            const precipData = useMemo(() => {
                return Array.from({ length: 12 }, (_, i) => ({
                    hour: new Date(Date.now() + i * 3600000).getHours(),
                    amount: Math.max(0, weather.precipIntensity + (Math.random() * 4 - 2)).toFixed(1)
                }));
            }, [weather.precipIntensity]);

            const weeklyForecast = useMemo(() => {
                const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
                const icons = ['Sun', 'Cloud', 'CloudRain', 'CloudLightning', 'CloudFog', 'CloudRain', 'Sun'];
                const today = new Date().getDay();
                
                return Array.from({ length: 7 }, (_, i) => {
                    const dayIndex = (today + i) % 7;
                    return {
                        day: i === 0 ? 'TODAY' : days[dayIndex],
                        high: 70 + Math.floor(Math.random() * 10),
                        low: 55 + Math.floor(Math.random() * 10),
                        icon: icons[dayIndex],
                        condition: i === 0 ? 'Rain' : ['Clear', 'Cloudy', 'Rain', 'Storm', 'Fog'][Math.floor(Math.random() * 5)]
                    };
                });
            }, []);

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            useEffect(() => {
                const weatherTimer = setInterval(() => {
                    setWeather(prev => ({
                        ...prev,
                        temp: prev.temp + (Math.random() > 0.5 ? 0.1 : -0.1),
                        precipIntensity: Math.max(0, prev.precipIntensity + (Math.random() * 0.5 - 0.25))
                    }));
                }, 5000);
                return () => clearInterval(weatherTimer);
            }, []);

            const maxPrecip = Math.max(...precipData.map(d => parseFloat(d.amount)));

            return (
                <div className="min-h-screen bg-black text-white p-6 font-sans">
                    <div className="max-w-7xl mx-auto space-y-6">
                        <header className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8">
                            <div>
                                <h1 className="text-3xl font-black tracking-tighter text-blue-500">WEATHER WATCH</h1>
                                <p className="text-slate-500 font-medium uppercase tracking-widest text-xs">Snellville</p>
                            </div>
                            <div className="bg-slate-900 border border-slate-700 px-6 py-3 rounded-2xl flex items-center gap-4 shadow-xl">
                                <Icon name="Clock" className="text-blue-400" size={24} />
                                <div className="text-right">
                                    <p className="text-2xl font-mono font-bold leading-none mb-1 text-white">
                                        {currentTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })}
                                    </p>
                                    <p className="text-[10px] text-slate-400 uppercase tracking-widest leading-none font-bold">
                                        {currentTime.toLocaleDateString([], { weekday: 'long', month: 'long', day: 'numeric' })}
                                    </p>
                                </div>
                            </div>
                        </header>

                        {alerts.length > 0 && (
                            <div className="animate-pulse">
                                {alerts.map(alert => (
                                    <div key={alert.id} className="bg-red-600/20 border-2 border-red-500 rounded-2xl p-6 flex flex-col md:flex-row gap-6 items-center shadow-[0_0_30px_rgba(239,68,68,0.2)]">
                                        <div className="bg-red-500 p-4 rounded-full shadow-lg text-white">
                                            <Icon name="AlertTriangle" size={48} />
                                        </div>
                                        <div className="flex-1 text-center md:text-left">
                                            <h2 className="text-3xl font-black text-red-500 mb-1 tracking-tight">{alert.title}</h2>
                                            <p className="text-xl font-bold text-white mb-2 underline decoration-red-500 underline-offset-4 uppercase tracking-tighter">UNTIL {alert.expiry}</p>
                                            <p className="text-slate-300 text-lg leading-tight italic font-medium">{alert.instruction}</p>
                                        </div>
                                        <div className="hidden lg:block bg-red-500/10 px-4 py-2 rounded-lg border border-red-500/50">
                                            <span className="text-red-500 font-bold uppercase tracking-widest text-sm">Status: Critical</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div className="space-y-6">
                                <Card title="Current Conditions" className="h-full">
                                    <div className="flex flex-col items-center justify-center py-4">
                                        <div className="relative mb-6">
                                           <div className="p-10 bg-slate-800/50 rounded-full border border-slate-700/50 relative overflow-hidden group shadow-inner text-blue-400">
                                             <Icon name="CloudRain" size={100} className="animate-pulse" />
                                             <div className="absolute inset-0 bg-blue-500/10 blur-2xl group-hover:bg-blue-500/20 transition-colors"></div>
                                           </div>
                                        </div>
                                        <div className="text-center relative">
                                            <div className="flex items-start justify-center">
                                                <span className="text-8xl font-black leading-none">{Math.round(weather.temp)}</span>
                                                <span className="text-4xl font-bold text-blue-500 mt-2">°F</span>
                                            </div>
                                            <p className="text-2xl text-slate-400 font-bold uppercase tracking-[0.2em] mt-2">{weather.condition}</p>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4 mt-8 pt-6 border-t border-slate-800">
                                        <Metric iconName="Droplets" label="Humidity" value={weather.humidity} unit="%" />
                                        <Metric iconName="Wind" label="Wind Speed" value={Math.round(weather.wind)} unit="MPH" />
                                        <Metric iconName="Navigation" label="Wind Dir" value={weather.windDir} unit="" />
                                        <Metric iconName="CloudRain" label="Rain Chance" value={weather.chanceOfRain} unit="%" />
                                    </div>
                                </Card>
                            </div>

                            <div className="lg:col-span-2 space-y-6">
                                <Card title="Precipitation Estimates (Next 12 Hours)">
                                    <div className="h-64 w-full flex items-end gap-1 px-2 relative mb-2">
                                        <div className="absolute top-0 left-0 text-[10px] text-slate-500 space-y-12 h-full flex flex-col justify-between py-1 font-bold">
                                           <p>12mm</p><p>6mm</p><p>0mm</p>
                                        </div>
                                        {precipData.map((data, idx) => (
                                            <div key={idx} className="flex-1 flex flex-col items-center group">
                                                <div className="w-full bg-gradient-to-t from-blue-600/40 via-blue-400 to-blue-300 rounded-t-sm transition-all duration-1000 ease-in-out relative border-x border-t border-blue-400/20"
                                                    style={{ height: `${(parseFloat(data.amount) / 12) * 100}%` }}>
                                                </div>
                                                <span className="text-[10px] text-slate-500 mt-3 font-mono font-bold">
                                                    {data.hour > 12 ? `${data.hour - 12}P` : data.hour === 12 ? '12P' : data.hour === 0 ? '12A' : `${data.hour}A`}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-8 grid grid-cols-3 gap-4 border-t border-slate-800 pt-6">
                                        <div className="text-center">
                                            <p className="text-xs text-slate-500 uppercase font-bold mb-1">Current Rate</p>
                                            <p className="text-xl font-bold text-blue-400 leading-none">{weather.precipIntensity.toFixed(1)} <span className="text-xs font-normal">mm/hr</span></p>
                                        </div>
                                        <div className="text-center border-x border-slate-800">
                                            <p className="text-xs text-slate-500 uppercase font-bold mb-1">Peak Estimate</p>
                                            <p className="text-xl font-bold text-white leading-none">{maxPrecip.toFixed(1)} <span className="text-xs font-normal">mm/hr</span></p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-xs text-slate-500 uppercase font-bold mb-1">Accumulation</p>
                                            <p className="text-xl font-bold text-white leading-none">42.4 <span className="text-xs font-normal">mm</span></p>
                                        </div>
                                    </div>
                                </Card>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <Card title="Environment Indices">
                                        <div className="flex justify-around items-center h-full py-2">
                                            <div className="text-center">
                                                <Icon name="Sun" className="mx-auto text-yellow-500 mb-2 shadow-yellow-500/20 shadow-xl" size={32} />
                                                <p className="text-xl font-black text-white">{weather.uvIndex}</p>
                                                <p className="text-[10px] text-slate-500 font-bold uppercase tracking-wider">UV Index</p>
                                            </div>
                                            <div className="w-px h-12 bg-slate-800"></div>
                                            <div className="text-center">
                                                <Icon name="Info" className="mx-auto text-green-500 mb-2 shadow-green-500/20 shadow-xl" size={32} />
                                                <p className="text-xl font-black text-green-400">{weather.airQuality}</p>
                                                <p className="text-[10px] text-slate-500 font-bold uppercase tracking-wider">Air Quality</p>
                                            </div>
                                        </div>
                                    </Card>
                                    <Card className="bg-blue-600/10 border-blue-500/50">
                                        <div className="flex items-center gap-4 h-full">
                                            <div className="bg-blue-600 p-3 rounded-full text-white shadow-blue-500/20 shadow-lg">
                                                <Icon name="Info" size={24} />
                                            </div>
                                            <div>
                                                <p className="text-sm font-black text-blue-400 uppercase tracking-tighter">System Health</p>
                                                <p className="text-xs text-slate-300">NWS Service active. Local sensors synced. Last update 12s ago.</p>
                                            </div>
                                        </div>
                                    </Card>
                                </div>
                            </div>
                        </div>

                        <Card title="7-Day Weekly Forecast">
                            <div className="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-4">
                                {weeklyForecast.map((day, idx) => (
                                    <div key={idx} className={`p-4 rounded-xl text-center border transition-colors ${idx === 0 ? 'bg-blue-500/10 border-blue-500/50 shadow-lg' : 'border-slate-800 hover:bg-slate-800/50'}`}>
                                        <p className={`text-xs font-black tracking-widest mb-3 uppercase ${idx === 0 ? 'text-blue-400' : 'text-slate-400'}`}>{day.day}</p>
                                        <div className={`mx-auto mb-4 ${idx === 0 ? 'text-blue-400' : 'text-slate-500'}`}>
                                            <Icon name={day.icon} size={32} />
                                        </div>
                                        <div className="space-y-1">
                                            <p className="text-2xl font-bold tracking-tighter leading-none text-white">{day.high}°</p>
                                            <p className="text-sm text-slate-500 font-semibold leading-none">{day.low}°</p>
                                        </div>
                                        <p className="text-[10px] text-slate-500 font-bold uppercase mt-3 tracking-tighter truncate opacity-60 italic">{day.condition}</p>
                                    </div>
                                ))}
                            </div>
                        </Card>

                        <footer className="bg-slate-900/50 border border-slate-800 p-3 rounded-xl flex flex-col sm:flex-row items-center justify-between text-[9px] text-slate-600 uppercase tracking-widest font-black gap-4">
                            <div className="flex items-center gap-6">
                                <span className="flex items-center gap-1"><span className="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span> API: CONNECTED</span>
                                <span className="flex items-center gap-1"><span className="w-1.5 h-1.5 bg-blue-500 rounded-full"></span> DATA SYNC: NOMINAL</span>
                            </div>
                            <div className="text-center sm:text-right opacity-60 italic">Skywatch Municipal Services • v2.5.0 Build 1051</div>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>